"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="bui.image.crop"),function(_,angular,undefined){!function(__WEBPACK_EXTERNAL_MODULE_1__){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){var d=c(1),e=(d.module("bui.image.crop",[]),c(2));c(3)(d,e),a.exports="bui.image.crop"},function(a,b){a.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(a,b){function c(a){if(!a.imageUrl)throw new Error("Cropper: No image url given.");this.isReady=!1,this.originalUrl=a.imageUrl;var b={cropAuto:!0,cropOnFly:!1,checkCrossOrigin:!1,apiCallback:undefined,cropCallback:undefined,width:400,height:300,imageUrl:undefined,target:undefined,showControls:!0,fitOnInit:!1,centerOnInit:!1,zoomStep:.1,maskWidth:30,actionLabels:{rotateLeft:" < ",rotateRight:" > ",zoomIn:" + ",zoomOut:" - ",fit:"(fit)",crop:"[crop]"}};this.options=this.extend(b,a),this.gesture={},this.gesture.events={start:"touchstart mousedown",move:"touchmove mousemove",stop:"touchend mouseup"},this.pointerPosition=undefined,this.elements={target:a.target,body:document.getElementsByTagName("body")[0]},this.events=new function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b].push(c)},this.triggerHandler=function(b,c){if(a[b])for(var d in a[b])a[b][d](c)}},this.buildDOM(),this.useHardwareAccelerate(this.elements.image);var c={crop:this.cropImage.bind(this),fit:this.applyFit.bind(this),rotate:this.applyRotation.bind(this),zoom:this.applyZoom.bind(this),remove:this.remove.bind(this)};this.events.on("ImageReady",this.initialize.bind(this)),this.options.cropCallback&&this.events.on("Cropped",function(a){this.options.cropCallback(a)}.bind(this)),this.destroyEvent="destory",this.options.apiCallback&&this.events.on("ImageReady",function(){this.options.apiCallback(c)}.bind(this))}a.exports=c;var d=function(a,b){this._pointHoverWidth=14,this._pointNormalWidth=10,this.canvas=a,this.ctx=this.canvas.getContext("2d"),this._minW=50,this._minH=50,(2*b+this._minW>this.canvas.width||2*b+this._minH>this.canvas.height)&&(b=Math.min((this.canvas.width-this._minW)/2,(this.canvas.height-this._minH)/2)),this.lt={x:b,y:b},this.rb={x:this.canvas.width-b,y:this.canvas.height-b},this.w=this.rb.x-this.lt.x,this.h=this.rb.y-this.lt.y,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartW=0,this._posResizeStartH=0,this._resizeCtrlIsHover=-1,this._resizeCtrlIsDragging=-1,this._draw=function(){this.ctx.save();var a=5,b=Math.floor(this.w/a),c=Math.floor(this.h/a);this.ctx.clearRect(this.lt.x,this.lt.y,this.w,this.h),this.ctx.restore(),this.ctx.beginPath(),this.ctx.strokeStyle="#CCC";for(var d=0;b>=d;d++){var e={x:this.lt.x+a*d,y:this.lt.y};d%2===0?this.ctx.moveTo(e.x,e.y):this.ctx.lineTo(e.x,e.y)}for(var d=0;b>=d;d++){var e={x:this.lt.x+a*d,y:this.lt.y+this.h};d%2===0?this.ctx.moveTo(e.x,e.y):this.ctx.lineTo(e.x,e.y)}for(var d=0;c>=d;d++){var e={x:this.lt.x+this.w,y:this.lt.y+a*d};d%2===0?this.ctx.moveTo(e.x,e.y):this.ctx.lineTo(e.x,e.y)}for(var d=0;c>=d;d++){var e={x:this.lt.x,y:this.lt.y+a*d};d%2===0?this.ctx.moveTo(e.x,e.y):this.ctx.lineTo(e.x,e.y)}this.ctx.stroke()}};d.prototype._calcPoints=function(){return[{x:this.lt.x,y:this.lt.y},{x:(this.rb.x+this.lt.x)/2,y:this.lt.y},{x:this.rb.x,y:this.lt.y},{x:this.lt.x,y:(this.rb.y+this.lt.y)/2},{x:this.rb.x,y:(this.rb.y+this.lt.y)/2},{x:this.lt.x,y:this.rb.y},{x:(this.rb.x+this.lt.x)/2,y:this.rb.y},{x:this.rb.x,y:this.rb.y}]},d.prototype.drawScene=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.fillStyle="rgba(0, 0, 0, 0.65)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),this.draw()},d.prototype.drawIcon=function(a,b){this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle="#FFF",this.ctx.fillStyle="#CCC",this.ctx.rect(a.x-b/2,a.y-b/2,b,b),this.ctx.fill(),this.ctx.stroke()},d.prototype.draw=function(){this._draw();var a=this._calcPoints();for(var b in a)this.drawIcon(a[b],this._resizeCtrlIsHover==b?this._pointHoverWidth:this._pointNormalWidth)},d.prototype._isCoordWithinResizeCtrl=function(a){var b=this._calcPoints(),c=-1;for(var d in b){var e=b[d];if(a[0]>e.x-this._pointHoverWidth/2&&a[0]<e.x+this._pointHoverWidth/2&&a[1]>e.y-this._pointHoverWidth/2&&a[1]<e.y+this._pointHoverWidth/2){c=d;break}}return c},d.prototype.processMouseMove=function(a,b){var c="default",d=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging>-1){var e,f,g=!0,h=!0,i=!0,j=!0;switch(this._resizeCtrlIsDragging){case 0:e=-1,f=-1,i=!1,j=!1;break;case 1:e=0,f=-1,j=!1;break;case 2:e=1,f=-1,g=!1,j=!1;break;case 3:e=-1,f=0,i=!1;break;case 4:e=1,f=0,g=!1;break;case 5:e=-1,f=1,i=!1,h=!1;break;case 6:e=0,f=1,h=!1;break;case 7:e=1,f=1,g=!1,h=!1}var k=(a-this._posResizeStartX)*e,l=(b-this._posResizeStartY)*f,m=this._posResizeStartH+l,n=this._posResizeStartW+k,o=this.w,p=this.h;this.w=Math.max(this._minW,n),this.h=Math.max(this._minH,m);var q=this.w-o,r=this.h-p;g&&(this.lt.x+=q*e,this.lt.x<0&&(this.lt.x=0)),h&&(this.lt.y+=r*f,this.lt.y<0&&(this.lt.y=0)),i&&(this.rb.x+=q*e,this.rb.x>this.canvas.width&&(this.rb.x=this.canvas.width)),j&&(this.rb.y+=r*f,this.rb.y>this.canvas.height&&(this.rb.y=this.canvas.height)),this.w=this.rb.x-this.lt.x,this.h=this.rb.y-this.lt.y,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,d=!0}else{var s=parseInt(this._isCoordWithinResizeCtrl([a,b]),10);if(s>-1){switch(s){case 0:c="nwse-resize";break;case 1:c="ns-resize";break;case 2:c="nesw-resize";break;case 3:c="ew-resize";break;case 4:c="ew-resize";break;case 5:c="nesw-resize";break;case 6:c="ns-resize";break;case 7:c="nwse-resize"}this._resizeCtrlIsHover=s,d=!0}}return angular.element(this.canvas).css({cursor:c}),d},d.prototype.processMouseDown=function(a,b){var c=parseInt(this._isCoordWithinResizeCtrl([a,b]),10);c>-1&&(this._resizeCtrlIsDragging=c,this._resizeCtrlIsHover=c,this._posResizeStartX=a,this._posResizeStartY=b,this._posResizeStartH=this.h,this._posResizeStartW=this.w)},d.prototype.processMouseUp=function(){this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1),this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},c.prototype.initialize=function(){this.setDimensions(),this.initCanvas(),this.imageHasToFit()&&(this.fitImage(),this.centerImage()),this.initializeGesture(),this.options.centerOnInit&&this.centerImage(),this.options.showControls&&this.bindControls(),this.options.cropAuto&&this.cropImage()},c.prototype.bindControls=function(){var a=this;this.elements.controls.rotateLeft.addEventListener("click",function(){a.applyRotation(-90)}),this.elements.controls.rotateRight.addEventListener("click",function(){a.applyRotation(90)}),this.elements.controls.zoomIn.addEventListener("click",function(){a.applyZoom(a.zoomInFactor)}),this.elements.controls.zoomOut.addEventListener("click",function(){a.applyZoom(a.zoomOutFactor)}),this.elements.controls.fit.addEventListener("click",this.applyFit.bind(this)),this.elements.controls.crop.addEventListener("click",this.cropImage.bind(this))},c.prototype.applyRotation=function(a){this.rotateImage(a),this.options.cropAuto&&this.cropImage()},c.prototype.applyZoom=function(a){this.zoomImage(a),this.options.cropAuto&&this.cropImage()},c.prototype.applyFit=function(){this.fitImage(),this.centerImage(),this.options.cropAuto&&this.cropImage()},c.prototype.imageHasToFit=function(){return this.elements.image.naturalWidth<this.options.width||this.elements.image.naturalHeight<this.options.height||this.width<1||this.height<1||this.options.fitOnInit},c.prototype.buildDOM=function(){var a;return a=this.elements,a.wrapper=document.createElement("div"),a.wrapper.className="imgCropper-wrapper",a.container=document.createElement("div"),a.container.className="imgCropper-container",a.image=document.createElement("img"),a.image.className="imgCropper-image",a.container.appendChild(a.image),a.wrapper.appendChild(a.container),a.target.appendChild(a.wrapper),this.options.showControls?(a.controls={},a.controls.wrapper=document.createElement("div"),a.controls.wrapper.className="imgCropper-controls",a.controls.rotateLeft=document.createElement("button"),a.controls.rotateLeft.innerHTML=this.options.actionLabels.rotateLeft,a.controls.rotateRight=document.createElement("button"),a.controls.rotateRight.innerHTML=this.options.actionLabels.rotateRight,a.controls.zoomIn=document.createElement("button"),a.controls.zoomIn.innerHTML=this.options.actionLabels.zoomIn,a.controls.zoomOut=document.createElement("button"),a.controls.zoomOut.innerHTML=this.options.actionLabels.zoomOut,a.controls.fit=document.createElement("button"),a.controls.fit.innerHTML=this.options.actionLabels.fit,a.controls.crop=document.createElement("button"),a.controls.crop.innerHTML=this.options.actionLabels.crop,a.controls.wrapper.appendChild(a.controls.rotateLeft),a.controls.wrapper.appendChild(a.controls.zoomOut),a.controls.wrapper.appendChild(a.controls.fit),a.controls.wrapper.appendChild(a.controls.crop),a.controls.wrapper.appendChild(a.controls.zoomIn),a.controls.wrapper.appendChild(a.controls.rotateRight),a.target.appendChild(a.controls.wrapper),void this.loadImage()):this.loadImage()},c.prototype.initCanvas=function(){var a=this.elements;a.wrapper.canvas=document.createElement("canvas"),a.wrapper.canvas.width=a.wrapper.clientWidth,a.wrapper.canvas.height=a.wrapper.clientHeight,a.wrapper.canvas.className="imgCropper-canvas",a.wrapper.appendChild(a.wrapper.canvas),this.area=new d(a.wrapper.canvas,this.options.maskWidth),this.area.drawScene()},c.prototype.remove=function(){var a=this.elements;a.target.removeChild(a.wrapper),a.target.removeChild(a.controls.wrapper)},c.prototype.destroy=function(){this.remove(),this.events.triggerHandler(this.destroyEvent)},c.prototype.loadImage=function(){var a,b=this;return/^data\:/.test(this.originalUrl)?(this.originalBase64=this.originalUrl,this.setupImageSRC()):(a=new XMLHttpRequest,a.onerror=a.onabort=function(a){b.originalBase64=b.originalUrl,b.setupImageSRC()},a.onload=function(){b.originalArrayBuffer=this.response,b.originalBase64="data:image/jpeg;base64,"+b.base64ArrayBuffer(this.response),b.setupImageSRC()},a.open("get",this.originalUrl,!0),a.responseType="arraybuffer",void a.send())},c.prototype.setupImageSRC=function(){var a=this.elements.image;this.options.checkCrossOrigin&&this.isCrossOrigin(this.originalUrl)&&(this.crossOrigin=a.crossOrigin,this.crossOrigin?this.crossOrigin=this.originalUrl:(this.crossOrigin="anonymous",this.crossOriginUrl=this.addTimestamp(this.originalUrl))),this.crossOrigin&&(this.elements.image.crossOrigin=this.crossOrigin),this.elements.image.src=this.crossOriginUrl||this.originalUrl,this.elements.image.onload=function(){this.events.triggerHandler("ImageReady")}.bind(this)},c.prototype.setDimensions=function(){this.zoomInFactor=1+parseFloat(this.options.zoomStep),this.zoomOutFactor=1/this.zoomInFactor,this.imageRatio=this.options.height/this.options.width,this.width=this.elements.image.naturalWidth/this.options.width,this.height=this.elements.image.naturalHeight/this.options.height,this.left=0,this.top=0,this.angle=0,this.data={scale:1,degrees:0,x:0,y:0,w:this.options.width,h:this.options.height,s:{sx:0,sy:0,sw:this.options.width,sh:this.options.height}},this.elements.container.style.width=100*this.width+"%",this.elements.container.style.height=100*this.height+"%",this.elements.container.style.top=0,this.elements.container.style.left=0,this.elements.wrapper.style.height="100%",this.elements.wrapper.style.width="100%",this.isReady=!0},c.prototype.initializeGesture=function(){var a=this,b=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},c=function(a){return angular.isDefined(a.changedTouches)?a.changedTouches:a.originalEvent.changedTouches},d=function(){a.removeEventListeners(window.document,a.gesture.events.move,f),a.removeEventListeners(a.area.canvas,a.gesture.events.start,e),a.removeEventListeners(a.elements.image,a.gesture.events.start,h)};a.events.on(a.destroyEvent,d);var e=function(d){if(a.isReady&&a.isValidEvent(d))if(d.preventDefault(),d.stopImmediatePropagation(),a.area._resizeCtrlIsHover>-1){var e,f,h=b(a.area.canvas);"touchstart"===d.type?(e=c(d)[0].pageX,f=c(d)[0].pageY):(e=d.pageX,f=d.pageY),a.area.processMouseDown(e-h.left,f-h.top),a.area.drawScene(),a.addEventListeners(window.document,a.gesture.events.stop,g)}else{var i;document.createEvent?(i=document.createEvent("MouseEvents"),i.initEvent("mousedown",!0,!0),i.delegate=d,a.elements.image.dispatchEvent(i)):(i=document.createEventObject(),i.eventType="mousedown",i.delegate=d,a.elements.image.fireEvent("on"+i.eventType,i))}},f=function(d){if(a.isReady){d.preventDefault(),d.stopImmediatePropagation();var e=a.elements;if(null!==e.image){var f,g,h=b(a.area.canvas);"touchmove"===d.type?(f=c(d)[0].pageX,g=c(d)[0].pageY):(f=d.pageX,g=d.pageY),a.area.processMouseMove(f-h.left,g-h.top),a.area.drawScene(),a.options.cropOnFly&&a.cropImage()}}},g=function(d){if(a.isReady&&a.isValidEvent(d)){d.preventDefault(),d.stopImmediatePropagation();var e,f,h=b(a.area.canvas);"touchstart"===d.type?(e=c(d)[0].pageX,f=c(d)[0].pageY):(e=d.pageX,f=d.pageY),a.area.processMouseUp(e-h.left,f-h.top),a.area.drawScene()}a.removeEventListeners(window.document,a.gesture.events.stop,g),a.options.cropAuto&&a.cropImage()},h=function(b){a.isReady&&a.isValidEvent(b)&&(b.preventDefault(),b.stopImmediatePropagation(),a.pointerPosition=a.getPointerPosition(b),i())},i=function(){a.elements.body.classList.add("imgCropper-dragging"),a.addEventListeners(a.elements.body,a.gesture.events.move,k),a.addEventListeners(a.elements.body,a.gesture.events.stop,j)},j=function(){a.elements.body.classList.remove("imgCropper-dragging"),a.removeEventListeners(a.elements.body,a.gesture.events.move,k),a.removeEventListeners(a.elements.body,a.gesture.events.stop,j),a.options.cropAuto&&a.cropImage()},k=function(b){a.dragging.call(a,b),a.options.cropOnFly&&a.cropImage()};this.addEventListeners(window.document,a.gesture.events.move,f),this.addEventListeners(a.area.canvas,a.gesture.events.start,e),this.addEventListeners(a.elements.image,a.gesture.events.start,h)},c.prototype.dragging=function(a){var b,c,d,e,f;a.preventDefault(),a.stopImmediatePropagation(),e=this.getPointerPosition(a),b=e.x-this.pointerPosition.x,c=e.y-this.pointerPosition.y,this.pointerPosition=e,d=0===b?null:this.left-b/this.elements.wrapper.clientWidth,f=0===c?null:this.top-c/this.elements.wrapper.clientHeight,this.setOffset(d,f)},c.prototype.setOffset=function(a,b){(a||0===a)&&(0>a&&(a=0),a>this.width-1&&(a=this.width-1),this.elements.container.style.left=(100*-a).toFixed(2)+"%",this.left=a,this.data.x=Math.round(a*this.options.width)),(b||0===b)&&(0>b&&(b=0),b>this.height-1&&(b=this.height-1),this.elements.container.style.top=(100*-b).toFixed(2)+"%",this.top=b,this.data.y=Math.round(b*this.options.height))},c.prototype.fitImage=function(){var a,b;a=this.width,b=this.height/this.width,b>1?(this.width=1,this.height=b):(this.width=1/b,this.height=1),this.elements.container.style.width=(100*this.width).toFixed(2)+"%",this.elements.container.style.height=(100*this.height).toFixed(2)+"%",this.data.scale*=this.width/a},c.prototype.centerImage=function(){this.setOffset((this.width-1)/2,(this.height-1)/2)},c.prototype.rotateImage=function(a){if(0===a||a%90!==0)throw new Error("Cropper: Support only multiple of 90° for rotation.");if(this.angle=(this.angle+a)%360,this.angle<0&&(this.angle+=360),a%180!==0){var b=this.height*this.imageRatio,c=this.width/this.imageRatio;this.width=b,this.height=c,this.width>=1&&this.height>=1?(this.elements.container.style.width=100*this.width+"%",this.elements.container.style.height=100*this.height+"%"):this.fitImage()}var d=1,e=1;if(this.angle%180!==0){var f=this.height/this.width*this.imageRatio;d=f,e=1/f}this.elements.image.style.width=100*d+"%",this.elements.image.style.height=100*e+"%",this.elements.image.style.left=(1-d)/2*100+"%",this.elements.image.style.top=(1-e)/2*100+"%",this.elements.image.style.transform="rotate("+this.angle+"deg)",this.elements.image.style.webkitTransform="rotate("+this.angle+"deg)",this.elements.image.style.mozTransform="rotate("+this.angle+"deg)",this.elements.image.style.msTransform="rotate("+this.angle+"deg)",this.elements.image.style.oTransform="rotate("+this.angle+"deg)",this.centerImage(),this.data.degrees=this.angle},c.prototype.zoomImage=function(a){if(!(0>=a||1==a)){var b=this.width;this.width*a>1&&this.height*a>1?(this.height*=a,this.width*=a,this.elements.container.style.height=(100*this.height).toFixed(2)+"%",this.elements.container.style.width=(100*this.width).toFixed(2)+"%",this.data.scale*=a):(this.fitImage(),a=this.width/b);var c=(this.left+.5)*a-.5,d=(this.top+.5)*a-.5;this.setOffset(c,d)}},c.prototype.cropImage=function(){return this.cropHandler()},c.prototype.cropHandler=function(){var a,b;a=document.createElement("canvas"),a.height=this.options.height,a.width=this.options.width;var c=-a.width/2,d=-a.height/2;b=a.getContext("2d"),b.translate(-c,-d),b.scale(this.data.scale,this.data.scale),b.save(),b.rotate(this.data.degrees*Math.PI/180),0==this.data.degrees?b.drawImage(this.elements.image,(c-this.data.x)/this.data.scale,(d-this.data.y)/this.data.scale):90==this.data.degrees?b.drawImage(this.elements.image,(d-this.data.y)/this.data.scale,-1*this.elements.image.naturalHeight+(-c+this.data.x)/this.data.scale):180==this.data.degrees?b.drawImage(this.elements.image,-1*this.elements.image.naturalWidth+(-c+this.data.x)/this.data.scale,-1*this.elements.image.naturalHeight+(-d+this.data.y)/this.data.scale):270==this.data.degrees&&b.drawImage(this.elements.image,-1*this.elements.image.naturalWidth+(-d+this.data.y)/this.data.scale,(c-this.data.x)/this.data.scale),b.restore();var e=a.toDataURL("image/png"),f=new Image,g=this;return f.onload=function(){var c=this.width/g.area.canvas.width,d=this.height/g.area.canvas.height,e=-this.width/2/g.data.scale,f=-this.height/2/g.data.scale,h=this.width/g.data.scale,i=this.height/g.data.scale,j=g.area.lt.x*c,k=g.area.lt.y*d,l=g.area.w*c,m=g.area.h*d;b.clearRect(e,f,h,i),b.drawImage(this,j,k,l,m,e,f,h,i),g.events.triggerHandler("Cropped",a.toDataURL("image/png"))},f.src=e,e},c.prototype.useHardwareAccelerate=function(a){a.style.perspective="1000px",a.style.backfaceVisibility="hidden"},c.prototype.extend=function(a,b){var c=a,d=Object.keys(a);return d.forEach(function(a,d,e){b[a]!==undefined&&(c[a]=b[a])}),c},c.prototype.addEventListeners=function(a,b,c,d){b.split(" ").forEach(function(b){d?a.addEventListener(b,c.bind(d),!1):a.addEventListener(b,c,!1)})},c.prototype.removeEventListeners=function(a,b,c,d){b.split(" ").forEach(function(b){d?a.removeEventListener(b,c.bind(d),!1):a.removeEventListener(b,c,!1)})},c.prototype.getPointerPosition=function(a){var b=a.delegate?a.delegate:a;return this.isTouchEvent(b)&&(b=b.touches[0]),{x:b.pageX,y:b.pageY}},c.prototype.isValidEvent=function(a){return this.isTouchEvent(a)?1===a.changedTouches.length:1===a.which},c.prototype.isTouchEvent=function(a){return/touch/i.test(a.type)},c.prototype.addTimestamp=function(a){var b="timestamp="+(new Date).getTime(),c="?";return-1!==a.indexOf("?")&&(c="&"),a.concat(c,b)},c.prototype.isCrossOrigin=function(a){var b=a.match();return Boolean(b&&(b[1]!==location.protocol||b[2]!==location.hostname||b[3]!==location.port))},c.prototype.base64ArrayBuffer=function(a){for(var b,c,d,e,f,g="",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(a),j=i.byteLength,k=j%3,l=j-k,m=0;l>m;m+=3)f=i[m]<<16|i[m+1]<<8|i[m+2],b=(16515072&f)>>18,c=(258048&f)>>12,d=(4032&f)>>6,e=63&f,g+=h[b]+h[c]+h[d]+h[e];return 1==k?(f=i[l],b=(252&f)>>2,c=(3&f)<<4,g+=h[b]+h[c]+"=="):2==k&&(f=i[l]<<8|i[l+1],b=(64512&f)>>10,c=(1008&f)>>4,d=(15&f)<<2,g+=h[b]+h[c]+h[d]+"="),g}},function(module,exports,__webpack_require__){module.exports=function(angular,Cropper){__webpack_require__(4),angular.module("bui.image.crop").directive("imageCropper",function(){return{restrict:"E",scope:{cropAuto:"@",cropOnFly:"@",centerOnInit:"@",checkCrossOrigin:"@",cropCallback:"&",api:"&",maskWidth:"@",fitOnInit:"@",height:"@",imageUrl:"@",showControls:"@",width:"@",zoomStep:"@",actionLabels:"&"},bindToController:!0,controllerAs:"vm",controller:function(){var self=this;this.actionLabels=this.actionLabels(),this.apiCallback=this.api(),this.cropCallback=this.cropCallback(),this.fitOnInit=eval(this.fitOnInit),this.centerOnInit=eval(this.centerOnInit),this.checkCrossOrigin=eval(this.checkCrossOrigin),this.showControls=eval(this.showControls),this.cropAuto=eval(this.cropAuto),this.cropOnFly=eval(this.cropOnFly),this.init=function(){this.target=this.element,this.api=new Cropper(self)}},link:function(a,b,c,d){d.element=b[0],d.init(),a.$on("$destroy",function(){a.vm.api.destroy()})}}})}},function(a,b,c){var d=c(5);"string"==typeof d&&(d=[[a.id,d,""]]);c(7)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(6)(),b.push([a.id,"body.imgCropper-dragging, body.imgCropper-dragging * {\n  cursor: move !important;\n  cursor: -webkit-grabbing !important;\n  cursor: -moz-grabbing !important;\n  cursor: grabbing !important;\n  cursor: grabbing, move;\n  /* IE hack */ }\n\n.imgCropper-wrapper {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n  cursor: grab, move;\n  /* IE hack */ }\n\n.imgCropper-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n  margin: 0 !important;\n  padding: 0 !important;\n  border: none !important; }\n\n.imgCropper-container > * {\n  position: absolute;\n  top: 0;\n  left: 0;\n  max-width: none;\n  max-height: none;\n  width: 100%;\n  height: 100%;\n  margin: 0 !important;\n  padding: 0 !important;\n  border: none !important; }\n\n.imgCropper-sample {\n  position: absolute !important;\n  top: -100000px     !important;\n  left: -100000px    !important;\n  width: auto        !important;\n  height: auto       !important; }\n.imgCropper-canvas\n{\nposition: absolute;\nleft: 0;\ntop: 0;\n}\n",""])},function(a,b){a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=n[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(j(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(j(d.parts[f],b));n[d.id]={id:d.id,refs:1,parts:g}}}}function e(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i=e[3],j={css:g,media:h,sourceMap:i};c[f]?c[f].parts.push(j):b.push(c[f]={id:f,parts:[j]})}return b}function f(a,b){var c=q(),d=t[t.length-1];if("top"===a.insertAt)d?d.nextSibling?c.insertBefore(b,d.nextSibling):c.appendChild(b):c.insertBefore(b,c.firstChild),t.push(b);else{if("bottom"!==a.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");c.appendChild(b)}}function g(a){a.parentNode.removeChild(a);var b=t.indexOf(a);b>=0&&t.splice(b,1)}function h(a){var b=document.createElement("style");return b.type="text/css",f(a,b),b}function i(a){var b=document.createElement("link");return b.rel="stylesheet",f(a,b),b}function j(a,b){var c,d,e;if(b.singleton){var f=s++;c=r||(r=h(b)),d=k.bind(null,c,f,!1),e=k.bind(null,c,f,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=i(b),d=m.bind(null,c),e=function(){g(c),c.href&&URL.revokeObjectURL(c.href)}):(c=h(b),d=l.bind(null,c),e=function(){g(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function k(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=u(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function l(a,b){var c=b.css,d=b.media;b.sourceMap;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function m(a,b){var c=b.css,d=(b.media,b.sourceMap);d&&(c+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+" */");var e=new Blob([c],{type:"text/css"}),f=a.href;a.href=URL.createObjectURL(e),f&&URL.revokeObjectURL(f)}var n={},o=function(a){var b;return function(){return"undefined"==typeof b&&(b=a.apply(this,arguments)),b}},p=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),q=o(function(){return document.head||document.getElementsByTagName("head")[0]}),r=null,s=0,t=[];a.exports=function(a,b){b=b||{},"undefined"==typeof b.singleton&&(b.singleton=p()),"undefined"==typeof b.insertAt&&(b.insertAt="bottom");var c=e(a);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){var h=c[g],i=n[h.id];i.refs--,f.push(i)}if(a){var j=e(a);d(j,b)}for(var g=0;g<f.length;g++){var i=f[g];if(0===i.refs){for(var k=0;k<i.parts.length;k++)i.parts[k]();delete n[i.id]}}}};var u=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()}])}(angular)}(window,window.angular);